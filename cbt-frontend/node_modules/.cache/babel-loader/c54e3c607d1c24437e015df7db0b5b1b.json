{"ast":null,"code":"var _jsxFileName = \"/Users/kazirahman/cbt-app/cbt-full/cbt-frontend/src/App.js\";\nimport React from 'react';\nimport GoogleLogin from \"react-google-login\";\nimport { GoogleLogout } from \"react-google-login\";\nimport Button from 'react-bootstrap/Button';\nimport JournalEntryForm from './JournalEntryForm';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport axios from 'axios';\nvar apiEndpoint = 'http://localhost:5000';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {//this.setState({isSignedIn: loggedIn, userDetails : userDeets})\n    };\n\n    this.responseGoogleSuccess = response => {\n      console.log(\"yeee\");\n      this.setState({\n        userDetails: response.profileObj,\n        isSignedIn: true\n      });\n      axios.post(apiEndpoint + '/users/' + this.state.userDetails.email, {\n        \"first_name\": this.state.userDetails.givenName,\n        \"last_name\": this.state.userDetails.familyName\n      }).then(res => {\n        console.log(res.data); //localStorage.setItem('isSignedIn', true);\n        //localStorage.setItem('user', JSON.stringify(this.state.userDetails));\n      });\n    };\n\n    this.logout = () => {\n      //localStorage.setItem('isSignedIn', false);\n      //localStorage.setItem('user', {});\n      //localStorage.clear()\n      console.log(\"yeee\");\n      this.setState({\n        isSignedIn: false,\n        userDetails: {}\n      }, () => this.forceUpdate());\n    };\n\n    this.checkSignedIn = () => {\n      console.log(\"we in here\", this.state.isSignedIn);\n\n      if (!this.state.isSignedIn) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, \"CBT\"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, \"Please log in to use CBT.\"), React.createElement(GoogleLogin, {\n          clientId: \"1034011358451-901ird0jj5jnle85inpimfpba5epnaqv.apps.googleusercontent.com\",\n          render: renderProps => React.createElement(Button, {\n            variant: \"outline-info\",\n            className: \"button\",\n            onClick: renderProps.onClick,\n            disabled: renderProps.disabled,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74\n            },\n            __self: this\n          }, \"Log in with Google\"),\n          onSuccess: this.responseGoogleSuccess,\n          onFailure: this.responseGoogle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }));\n      } else {\n        console.log(\"we returning else\");\n        return React.createElement(\"div\", {\n          className: \"userDetails-wrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, \"CBT\"), React.createElement(\"div\", {\n          className: \"details-wrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(GoogleLogout, {\n          render: renderProps => React.createElement(Button, {\n            variant: \"outline-danger\",\n            className: \"logout-button\",\n            onClick: renderProps.onClick,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          }, \"Log Out\"),\n          onLogoutSuccess: this.logout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: this.state.userDetails.imageUrl,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, \"Welcome \", this.state.userDetails.givenName, \" \", this.state.userDetails.familyName), React.createElement(\"div\", {\n          className: \"email\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, this.state.userDetails.email))), React.createElement(JournalEntryForm, {\n          user: this.state.userDetails,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"bar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"stand\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }));\n      }\n    };\n\n    const loggedIn = localStorage.getItem('isSignedIn') === 'true';\n    const userDeets = loggedIn ? JSON.parse(localStorage.getItem('user')) : {};\n    console.log(\"user shet\", userDeets);\n    console.log(loggedIn);\n    this.state = {\n      onProfile: false,\n      selectedMonth: new Date().getMonth() + 1,\n      selectedYear: new Date().getFullYear(),\n      data: [],\n      isSignedIn: loggedIn,\n      userDetails: userDeets\n    }; //this.responseGoogle = this.responseGoogle.bind(this)\n    //this.componentDidMount = this.componentDidMount.bind(this)\n    //this.onSuccess = this.onSuccess.bind(this)\n    //this.onSignIn = this.onSignIn.bind(this)\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, this.checkSignedIn());\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/kazirahman/cbt-app/cbt-full/cbt-frontend/src/App.js"],"names":["React","GoogleLogin","GoogleLogout","Button","JournalEntryForm","axios","apiEndpoint","App","Component","constructor","props","componentDidMount","responseGoogleSuccess","response","console","log","setState","userDetails","profileObj","isSignedIn","post","state","email","givenName","familyName","then","res","data","logout","forceUpdate","checkSignedIn","renderProps","onClick","disabled","responseGoogle","imageUrl","loggedIn","localStorage","getItem","userDeets","JSON","parse","onProfile","selectedMonth","Date","getMonth","selectedYear","getFullYear","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport GoogleLogin from \"react-google-login\";\nimport { GoogleLogout } from \"react-google-login\";\nimport Button from 'react-bootstrap/Button';\nimport JournalEntryForm from './JournalEntryForm'\nimport logo from './logo.svg';\nimport './App.css';\nimport axios from 'axios'\n\nvar apiEndpoint = 'http://localhost:5000'\n\nclass App extends React.Component {\n  constructor(props){\n    super(props)\n    const loggedIn = localStorage.getItem('isSignedIn') === 'true';\n    const userDeets = loggedIn ? JSON.parse(localStorage.getItem('user')) : {}\n    console.log(\"user shet\", userDeets)\n    console.log(loggedIn);\n    this.state = {\n      onProfile: false,\n      selectedMonth: new Date().getMonth() + 1,\n      selectedYear: new Date().getFullYear(),\n      data: [],\n      isSignedIn: loggedIn,\n      userDetails: userDeets\n    }\n\n    \n    //this.responseGoogle = this.responseGoogle.bind(this)\n    //this.componentDidMount = this.componentDidMount.bind(this)\n    //this.onSuccess = this.onSuccess.bind(this)\n    //this.onSignIn = this.onSignIn.bind(this)\n  }\n\n  componentDidMount = () => {\n\n    //this.setState({isSignedIn: loggedIn, userDetails : userDeets})\n  }\n  \n\n  responseGoogleSuccess = (response) => {\n    console.log(\"yeee\")\n    this.setState({userDetails: response.profileObj, isSignedIn: true});\n    axios.post(apiEndpoint + '/users/' + this.state.userDetails.email,  {\"first_name\": this.state.userDetails.givenName, \"last_name\": this.state.userDetails.familyName})\n      .then(res => {\n        console.log(res.data);\n        //localStorage.setItem('isSignedIn', true);\n        //localStorage.setItem('user', JSON.stringify(this.state.userDetails));\n      })\n  };\n\n  logout = () => {\n    //localStorage.setItem('isSignedIn', false);\n    //localStorage.setItem('user', {});\n    //localStorage.clear()\n    console.log(\"yeee\")\n    this.setState({isSignedIn: false, userDetails:{}}, () => this.forceUpdate())\n  };\n\n  checkSignedIn = () => {\n    console.log(\"we in here\", this.state.isSignedIn)\n    if(!this.state.isSignedIn){\n      return(\n        <div>\n          <h1>CBT</h1>\n          <div>\n            \n            Please log in to use CBT.\n          </div>\n          <GoogleLogin\n          clientId=\"1034011358451-901ird0jj5jnle85inpimfpba5epnaqv.apps.googleusercontent.com\"\n          render={renderProps => (\n\n            <Button variant=\"outline-info\"\n              className=\"button\"\n              onClick={renderProps.onClick}\n              disabled={renderProps.disabled}\n            >\n              Log in with Google\n            </Button>\n          )}\n          onSuccess={this.responseGoogleSuccess}\n          onFailure={this.responseGoogle}\n        />\n        </div>\n      )\n    }else{\n      console.log(\"we returning else\")\n      return(\n        <div className=\"userDetails-wrapper\">\n          <h1>CBT</h1>\n        <div className=\"details-wrapper\">\n          <GoogleLogout\n            render={renderProps => (\n              <Button variant=\"outline-danger\"\n                className=\"logout-button\"\n                onClick={renderProps.onClick}\n              >\n                Log Out\n              </Button>\n            )}\n            onLogoutSuccess={this.logout}\n          />\n          <br/>\n\n          <div className=\"image\">\n            <img src={this.state.userDetails.imageUrl} />\n          </div>\n          <div className=\"name\">\n            Welcome {this.state.userDetails.givenName}{\" \"}\n            {this.state.userDetails.familyName}\n          </div>\n          <div className=\"email\"><i>{this.state.userDetails.email}</i></div>\n        </div>\n        <JournalEntryForm user = {this.state.userDetails}/>\n        <div className=\"bar\" />\n        <div className=\"stand\" />\n      </div>\n      )\n    }\n  }\n\n  render(){\n    return(\n      <div className=\"App\">\n        {this.checkSignedIn()}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}