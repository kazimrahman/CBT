{"ast":null,"code":"var _jsxFileName = \"/Users/kazirahman/cbt-app/cbt-backend/cbt-frontend/src/JournalEntryForm.js\";\nimport React from 'react';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport Delete from './Delete';\nimport axios from 'axios';\nvar apiEndpoint = 'http://localhost:5000';\n\nclass JournalEntryForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      this.fetchEntries();\n    };\n\n    this.handleChildChange = () => {\n      this.fetchEntries();\n      console.log(this.state.entries);\n    };\n\n    this.handleSubmit = event => {\n      if (event.target.situation.value.length === 0 && event.target.title.value.length === 0) {\n        console.log(\"we empty\");\n        event.preventDefault();\n      } else {\n        var form_data = {\n          \"title\": event.target.title.value,\n          \"situation\": event.target.situation.value //\"rational_response\": {\"rr\": event.target.rational_response.value, \"value\": 10}\n\n        };\n        event.target.situation.value = \"\";\n        event.target.title.value = \"\"; //event.target.rational_response.value = \"\"\n\n        event.preventDefault();\n        console.log(this.state.user);\n        axios.post(apiEndpoint + '/journalentries/' + this.state.user, form_data).then(res => {\n          this.fetchEntries();\n        });\n      }\n    };\n\n    this.fetchEntries = () => {\n      axios.get(apiEndpoint + '/journalentries/' + this.state.user).then(res => {\n        if (res.data.length > 0 && res.data.length != this.state.entries.length) {\n          this.setState({\n            entries: res.data.reverse()\n          }, () => this.forceUpdate());\n        }\n      });\n    };\n\n    this.expand = () => {\n      console.log(\"poop\");\n    };\n\n    this.prettyDate = date => {\n      var new_date = new Date(Date.parse(date)); //return month + \" \" + day + \", \" + year\n\n      new_date = new_date.toString();\n      return new_date.substring(0, new_date.indexOf(\"GMT\")); //return new_date\n    };\n\n    this.renderEntries = () => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Table, {\n        striped: true,\n        bordered: true,\n        hover: true,\n        align: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Title\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Situation\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Date Logged\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Delete\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, Object.keys(this.state.entries).map((value, index) => React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        width: \"25%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, this.state.entries[value].title), React.createElement(\"td\", {\n        width: \"50%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, this.state.entries[value].situation), React.createElement(\"td\", {\n        width: \"20%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, this.prettyDate(this.state.entries[value].date_logged)), React.createElement(\"td\", {\n        width: \"5%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Delete, {\n        entry: this.state.entries[value],\n        callback: () => {\n          this.handleChildChange();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      })))))));\n    };\n\n    this.state = {\n      user: props.user.email,\n      rationalResponse: {},\n      situation: \"\",\n      title: \"\",\n      entries: []\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"title\",\n      placeholder: \"Title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"situation\",\n      placeholder: \"Situation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(Button, {\n      variant: \"outline-info\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Add a new Thought Journal\"))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, this.state.entries.length > 0 && this.renderEntries()));\n  }\n\n}\n\nexport default JournalEntryForm;","map":{"version":3,"sources":["/Users/kazirahman/cbt-app/cbt-backend/cbt-frontend/src/JournalEntryForm.js"],"names":["React","Table","Button","Form","Delete","axios","apiEndpoint","JournalEntryForm","Component","constructor","props","componentDidMount","fetchEntries","handleChildChange","console","log","state","entries","handleSubmit","event","target","situation","value","length","title","preventDefault","form_data","user","post","then","res","get","data","setState","reverse","forceUpdate","expand","prettyDate","date","new_date","Date","parse","toString","substring","indexOf","renderEntries","Object","keys","map","index","date_logged","email","rationalResponse","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form'\nimport Delete from './Delete'\nimport axios from 'axios'\nvar apiEndpoint = 'http://localhost:5000'\n\nclass JournalEntryForm extends React.Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            user: props.user.email,\n            rationalResponse: {},\n            situation: \"\",\n            title: \"\",\n            entries: []\n        }\n    }\n\n    componentDidMount = () => {\n        this.fetchEntries()\n    }\n\n    handleChildChange = () => {\n        this.fetchEntries()\n        console.log(this.state.entries)\n    }\n\n\n    handleSubmit = (event) => {\n        if(event.target.situation.value.length === 0 && event.target.title.value.length === 0){\n            console.log(\"we empty\")\n            event.preventDefault()\n        }else{\n            var form_data = {\n                \"title\" : event.target.title.value,\n                \"situation\": event.target.situation.value\n                //\"rational_response\": {\"rr\": event.target.rational_response.value, \"value\": 10}\n            }\n            \n            event.target.situation.value = \"\"\n            event.target.title.value = \"\"\n            //event.target.rational_response.value = \"\"\n            event.preventDefault()\n            console.log(this.state.user)\n            \n            axios.post(apiEndpoint + '/journalentries/' + this.state.user,  form_data)\n                .then(res => {\n                    this.fetchEntries()\n                }\n            )\n        }\n        \n    }\n\n    fetchEntries = () => {\n        axios.get(apiEndpoint + '/journalentries/' + this.state.user)\n            .then(res => {\n                if(res.data.length > 0 && res.data.length != this.state.entries.length){\n                    this.setState({entries: res.data.reverse()}, () => this.forceUpdate())\n                }\n            }\n        )\n    }\n\n    expand = () =>{\n        console.log(\"poop\")\n    }\n\n    prettyDate = (date) => {\n        var new_date = new Date(Date.parse(date))\n\n        //return month + \" \" + day + \", \" + year\n        new_date = new_date.toString()\n        return new_date.substring(0, new_date.indexOf(\"GMT\"))\n        //return new_date\n    }\n\n    renderEntries = () => {\n        return (\n        <div>\n            <Table striped bordered hover align=\"right\">\n                <thead>\n                    <tr>\n                    <th>Title</th>\n                    <th>Situation</th>\n                    <th>Date Logged</th>\n                    <th>Delete</th>\n                    </tr>\n                    \n                </thead>\n                <tbody>\n                    {\n                    Object.keys(this.state.entries).map((value,index)=>(\n                        <tr>\n                            <td width=\"25%\">{this.state.entries[value].title}</td>\n                            <td width=\"50%\">{this.state.entries[value].situation}</td>\n                            <td width=\"20%\">{this.prettyDate(this.state.entries[value].date_logged)}</td>\n                            <td width=\"5%\"><Delete entry={this.state.entries[value]} callback={() => { this.handleChildChange() }}/></td>\n                        </tr>\n                    ))\n                    }\n                </tbody>\n            </Table>\n            </div>\n        )\n    }\n\n    render(){\n        return(\n            <div>\n                <div>\n                    <Form onSubmit={this.handleSubmit}>\n                        <Form.Control type=\"text\" name = \"title\" placeholder=\"Title\"/>\n                        <Form.Control type=\"text\" name=\"situation\" placeholder=\"Situation\" />\n                        <Button variant=\"outline-info\" type=\"submit\">Add a new Thought Journal</Button>\n                    </Form>\n                </div>\n                <br/>\n                <div>\n                    {this.state.entries.length > 0 && this.renderEntries()}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default JournalEntryForm"]},"metadata":{},"sourceType":"module"}